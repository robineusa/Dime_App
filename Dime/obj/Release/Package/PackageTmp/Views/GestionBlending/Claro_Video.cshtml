@model Telmexla.Servicios.DIME.Entity.ViewModelBlending
@{
    ViewBag.Title = "Claro Video";
    ViewBag.SubTitle = "Gestión Blending";
}
@if (Session["Blending Claro Video"] != null)
{
using (Html.BeginForm("Guarda_Claro_Video", "GestionBlending", FormMethod.Post, new { id = "", role = "form" }))
{
<div class="callout callout-success" style="margin-bottom: 0 ; background-color:rgb(255, 255, 255) !important; padding: 0 0 0 0; color: black !important;">
    <div style="background-color:#dcdcdc; padding-top:15px; padding-left:15px; padding-bottom:15px;">
        <div class="row">
            <div class="col-xs-2">
                <small>Número de Cuenta:</small>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-4">
                <table>
                    <tr>
                        <td>
                            @Html.TextBoxFor(m => m.DatosCliente.Cuenta, new { @class = "form-control input-sm", Id = "cuentaCliente" })


                        </td>
                        <td>

                            @if (Model.DatosCliente.Nombre.Equals("No existen datos"))
                            {
                                <label style="color:red; display:inline-block"> &nbsp;&nbsp; @Model.DatosCliente.Nombre</label>
                            }
                        </td>
                    </tr>
                </table>

                @Html.HiddenFor(m=>m.ClaroVideoGestionado.Id)
                @Html.HiddenFor(m=>m.ClaroVideoGestionado.OperacionGestion)
            </div>
        </div>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-9" style="width:100%; ">

        <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
                <li id="Li1" class="active" style="background-color: #dcdcdc; border-color: #00733e;"><a href="#Datos_Basicos" style="background-color: transparent;" data-toggle="tab">Datos Básicos</a></li>
                <li id="Li2"><a style="background-color: transparent;" href="#Historico" data-toggle="tab">Mi Histórico</a></li>
                <li id="Li3"><a style="background-color: transparent;" href="#Seguimientos" data-toggle="tab">Mis Seguimientos</a></li>
            </ul>
            <div class="tab-content" style="padding-left:0; padding-top: 0">
                <div class="active tab-pane" id="Datos_Basicos" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px;">
                    <br />
                    <table>
                        <tr>
                            <td width="200" style="padding:1px;">
                                <small>Nombre del Cliente:  </small>

                            <td width="200" style="padding:1px;">
                                <small>Apellido del Cliente:  </small>
                            </td>

                            <td width="200" style="padding:1px;">
                                <small>Dir. Instalación:  </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Dir. Correspondencia:  </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Teléfono 1: </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Teléfono 2:</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Nombre, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Apellido, new { @class = "form-control input-sm" })
                            </td>

                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.DirInstalacion, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.DirCorrespondencia, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Telefono1, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Telefono2, new { @class = "form-control input-sm" })
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                <small>Telefono 3: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Móvil 1:  </small>
                            </td>

                            <td style="padding:1px;">
                                <small>Móvil 2: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Nombre Comunidad: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Correo Actual: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Estrato: </small>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Telefono3, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Celular1, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Celular2, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.NombreComunidad, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Correo, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Estrato, new { @class = "form-control input-sm" })
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                <small>Tipo Cliente: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Paquete Actual:  </small>
                            </td>

                            <td style="padding:1px;">
                                <small>Movil Postpago: </small>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.TipoCliente, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Productos, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.TelefonoConv, new { @class = "form-control input-sm" })
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="tab-pane" id="Historico"style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">
                    <div id="historicoGrid"></div>
                  </div>
                <div class="tab-pane" id="Seguimientos" style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">
                
                    <div id="seguimientosGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="box box-success">
            <div class="box-body">
                <div class="row">
                    <div class="col-xs-12">
                        <h2 class="page-header" style="margin-top:25px">
                            <i class="fa fa-sitemap"></i> Árbol de Tipificación
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <br />
                            <div class="form-group">
                                <table>
                                    <tr>
                                        <td style="padding-left:1px; width:200px;">
                                            <label>Tipo contacto</label>
                                            @Html.DropDownListFor(m => m.ClaroVideoGestionado.TipoDeContacto, new List<SelectListItem> { new SelectListItem { Text = "--Seleccione --", Value = "--Seleccione--" } }, new { @class = "form-control", onchange = "SetearCierresChoices();", id = "tipoContactosSelect" })
                                        </td>
                                        <td style="padding-left:1px; width:220px;">
                                            <label>Gestión</label>
                                            @Html.DropDownListFor(m => m.ClaroVideoGestionado.TipoDeGestion, new List<SelectListItem> { new SelectListItem { Text = "--Seleccione--", Value = "--Seleccione--" } }, new { @class = "form-control", onchange = "SetearRazonesChoices();", id = "tiposCierresSelect" })
                                        </td>
                                        <td style="padding-left:4px; width:260px;">
                                            <label>Cierre</label>
                                            @Html.DropDownListFor(m => m.ClaroVideoGestionado.Cierre, new List<SelectListItem> { new SelectListItem { Text = "--Seleccione--", Value = "--Seleccione--" } }, new { @class = "form-control", onchange = "SetearCausaChoices();", id = "tiposRazonSelect" })
                                        </td>
                                        <td style="padding-left:4px; width:260px;">
                                            <label>Razón</label>
                                            @Html.DropDownListFor(m => m.ClaroVideoGestionado.Razon, new List<SelectListItem> { new SelectListItem { Text = "--Seleccione--", Value = "--Seleccione--" } }, new { @class = "form-control", id = "tiposCausasSelect" })
                                        </td>
                                    </tr>
                                </table>

                            </div>
                        </div>
                        <h2 class="page-header" style="margin-top: 40px;">
                            <i class="fa fa-gift"></i> Servicio Ofrecido
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <br />
                            <table>
                                <tr>
                                    <td style="padding-left:4px; width:200px;">
                                        <label style="font-weight: 400; padding:5px; border-color: burlywood; background-color:rgba(222, 184, 135, 0.4); width:100%">
                                            @Html.CheckBoxFor(m => m.ClaroVideoGestionado.checkBoxAtribute1, new { @checked = "checked" })
                                            Claro Video
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-left:4px; width:200px;">
                                        <label style="font-weight: 400; padding:5px; border-color: burlywood; background-color:rgba(222, 184, 135, 0.8); width:100%">
                                            @Html.CheckBoxFor(m => m.ClaroVideoGestionado.checkBoxAtribute2, new { @checked = "checked" })
                                            Elegido Fijo Móvil
                                        </label>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <h2 class="page-header" style="margin-top:40px">
                            <i class="fa fa-calendar-plus-o "></i> Seguimientos
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <div class="box-body">
                                <table id="Calendario_Seguimiento" style="display:block; margin-bottom: 0px;">
                                    <tr>
                                        <td style="padding:1px;">
                                            <small>Seleccione Fecha y Hora del Seguimiento: </small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding:1px;">
                                            @{

                                                Model.ClaroVideoGestionado.FechaSeguimiento = null;
                                            }
                                            @Html.TextBoxFor(m => m.ClaroVideoGestionado.FechaSeguimiento, new { @class = "form-control input-sm", id = "CV_Fecha", placeholder = "Seleccione Fecha" })
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 class="page-header" style="margin-top: 40px;">
                            <i class="fa fa-comment"></i> Observaciones
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <br />
                            <table>
                                <tr>
                                    <td style="padding:1px; width:1200px;">
                                        <strong>NOTA ANTERIOR: </strong>  @Model.ClaroVideoGestionado.Observaciones
                                        @{

                                            Model.ClaroVideoGestionado.Observaciones = " ";
                                        }
                                        @Html.TextBoxFor(m => m.ClaroVideoGestionado.Observaciones, new { @class = "form-control input-sm", placeholder = "", style = "width:100%; height:70px;" })
                                        
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div class="box-footer">
                <button type="submit" class="btn btn-block btn-primary" name="cambiarDatos" value="true" style="width:10%;  margin-left:1%;">Guardar</button>
            </div>
            <br />
        </div>
    </div>
</div>

}
@section Scripts{
    <script>
        var urlControlTipoContatoList = '@Url.Action("TiposDeContactoList","GestionBlending")';
        var urlControlTiposCierresList = '@Url.Action("TiposCierresList", "GestionBlending")';
        var urlControlTiposRazonesList = '@Url.Action("TiposRazonesList", "GestionBlending")';
        var urlControlTiposCausasList = '@Url.Action("TiposCausasList", "GestionBlending")';
        var  dataHistoricoGestion = @Html.Raw(Json.Encode(Model.HistoricoClaroVideo));
    </script>
<script src="~/Scripts/Gestion_Blending/jquery.datetimepicker.full.js"></script>
<link href="~/Styles/Elements/jquery.datetimepicker.css" rel="stylesheet" />
<script src="~/Scripts/Gestion_Blending/Claro_Video.js?1.0.2"></script>


}
}
else
{
<div class="row">

    <div class="box box-primary">

        <div class="box-body">

            <div class="row">
                <div class="col-md-12">
                    <div class="error-page">
                        <h2 class="headline text-red" style="margin-top:-18px;">502</h2>
                        <div class="error-content">
                            <h3><i class="fa fa-warning text-red"></i> Oops! Acceso Denegado.</h3>
                            <p style="text-align:justify;">
                                La información que se relaciona en esta vista no es posible visualizarse ya que su perfil no posee el acceso necesario.
                                Por favor solicite al administrador del sistema el acceso correspondiente.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}