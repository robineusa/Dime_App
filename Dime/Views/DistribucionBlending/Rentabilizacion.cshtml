@model Telmexla.Servicios.DIME.Entity.ViewModelDistribucionesBlending
@{ ViewBag.Title = "Rentabilización";
    ViewBag.SubTitle = "Gestión Blending";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("Rentabilizacion", "DistribucionBlending", FormMethod.Post, new { id = "datosCliente", role = "form" }))
{

    <div class="callout callout-info" style="margin-bottom: 0 ; background-color:rgb(255, 255, 255) !important; padding: 0 0 0 0; color: black !important;">
        <div style="background-color:#dcdcdc; padding-top:15px; padding-left:15px; padding-bottom:15px;">
            <div class="row">
                <div class="col-xs-2">
                    <small>Número de Cuenta:</small>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-4">
                    <table>
                        <tr>
                            <td style="padding:5px;">
                                @Html.TextBoxFor(m => m.DatosDelCliente.Cuenta, new { @class = "form-control input-sm", Id = "cuentaCliente" })
                            </td>
                            <td style="padding:5px;">


                        </tr>
                    </table>

                </div>
            </div>
            @if (ViewBag.ValidacionBase == null)
            {
                <div style="float:left;z-index:4;position:absolute;margin-top:-70px;height:80px;width:100%;margin-left:150px;">
                    <div style="width:50px;height:80px;float:left;"></div>
                    <div class="" style="float:left;width:280px;height:80px;max-height:80px;background-color:white;">
                        <span class="info-box-icon bg-red" style="width:80px;height:80px;max-height:80px;"><i class="ion-ios-information" style="width:80px;height:80px;max-height:80px;"></i></span>
                        <div class="info-box-content" style="width:200px;height:60px;max-height:60px;">
                            <span class="info-box-number">NUMERO DE TOQUES</span>
                            <span class="info-box-number">@ViewBag.CantidadToques</span>
                        </div>
                    </div>
                    @if (ViewBag.Cierre != null)
                    {
                        <div class="" style="float:left;width:280px;height:80px;max-height:80px;background-color:white;margin-left:5px;">
                            <span class="info-box-icon bg-orange" style="width:80px;height:80px;max-height:80px;"><i class="ion-ios-help" style="width:80px;height:80px;max-height:80px;"></i></span>
                            <div class="info-box-content" style="width:200px;height:60px;max-height:60px;">
                                <span class="info-box-number">ULTIMO CIERRE</span>
                                <span class="info-box-text">@ViewBag.Cierre</span>
                            </div>
                        </div>}
                    else { }


                    @if (ViewBag.Razon != null)
                    {
                        <div class="" style="float:left;width:480px;height:80px;max-height:80px;background-color:white;margin-left:5px;">
                            <span class="info-box-icon bg-black" style="width:80px;height:80px;max-height:80px;"><i class="ion-checkmark-circled" style="width:80px;height:80px;max-height:80px;"></i></span>
                            <div class="info-box-content" style="width:400px;height:60px;max-height:60px;">
                                <span class="info-box-number">ULTIMA GESTION</span>
                                <span class="info-box-text">@ViewBag.Razon</span>
                            </div>
                        </div>
                    }
                    else
                    { }
                </div>
            }
            else
            {
                <div style="float:left;z-index:4;position:absolute;margin-top:-70px;height:80px;width:100%;margin-left:150px;">
                    <div style="width:50px;height:80px;float:left;"></div>
                    <div class="" style="float:left;height:80px;max-height:80px;background-color:white;">
                        <span class="info-box-icon bg-red" style="width:80px;height:80px;max-height:80px;"><i class="ion-sad" style="width:80px;height:80px;max-height:80px;"></i></span>
                        <div class="info-box-content" style="height:60px;max-height:60px;">
                            <span class="info-box-number">INFORMACIÓN IMPORTANTE</span>
                            <span class="info-box-text">@ViewBag.ValidacionBase</span>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <br />


    <div class="row">
        <div class="col-md-9" style="width:100%; ">

            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li id="Li1" class="active" style="background-color: #dcdcdc;"><a href="#Datos_Basicos" style="background-color: transparent;" data-toggle="tab">Datos Básicos</a></li>
                    <li id="Li2"><a style="background-color: transparent;" href="#InformacionNiveles" data-toggle="tab">Información de Niveles</a></li>
                    <li id="Li4"><a style="background-color: transparent;" href="#Historial" data-toggle="tab">Mi Historial</a></li>
                    <li id="Li5"><a style="background-color: transparent;" href="#Seguimientos" data-toggle="tab">Mis Seguimientos</a></li>

                </ul>
                <div class="tab-content" style="padding-left:0; padding-top: 0">
                    <div class="active tab-pane" id="Datos_Basicos" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px;">
                        <br />
                        <table>
                            <tr>
                                <td width="200" style="padding:1px;">
                                    <small>Nombre del Cliente:  </small>
                                </td>
                                <td width="200" style="padding:1px;">
                                    <small>Apellido del Cliente:  </small>
                                </td>
                                <td width="200" style="padding:1px;">
                                    <small>Dir. Instalación:  </small>
                                </td>
                                <td width="200" style="padding:1px;">
                                    <small>Dir. Correspondencia:  </small>
                                </td>
                                <td width="200" style="padding:1px;">
                                    <small>Teléfono 1: </small>
                                </td>
                                <td width="200" style="padding:1px;">
                                    <small>Teléfono 2:</small>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Nombre, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Apellido, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>

                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.DirInstalacion, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.DirCorrespondencia, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Telefono1, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Telefono2, new { @class = "form-control input-sm" })
                                </td>
                            </tr>
                            <tr>
                                <td style="padding:1px;">
                                    <small>Teléfono 3: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Móvil 1: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Móvil 2:  </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Móvil Postpago:  </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Corre Actual: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Estrato: </small>
                                </td>

                            </tr>
                            <tr>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Telefono3, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Celular1, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Celular2, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.TelefonoConv, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Correo, new { @class = "form-control input-sm" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Estrato, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                            </tr>

                            <tr>
                                <td style="padding:1px;">
                                    <small>Paquete Actual:  </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Nodo: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Nombre Comunidad: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>División: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Tipo Cliente: </small>
                                </td>
                                <td style="padding:1px;">
                                    <small>Descripción: </small>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Productos, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Nodo, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.NombreComunidad, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Division, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.TipoCliente, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td style="padding:1px;">
                                    @Html.TextBoxFor(m => m.DatosDelCliente.Descripcion, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                            </tr>

                        </table>

                    </div>
                    <div class="tab-pane" id="InformacionNiveles" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px;">
                        <br />
                        <table>
                            <tr>
                                <td>
                                    <small>Consumos PPV:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.ConsumosPpv, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td>
                                    <small>Última PPV:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.UltimaPpv, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td>
                                    <small>Siembra HD:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.SiembraHd, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td>
                                    <small>Siembra VOZ:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.SiembraVoz, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td>
                                    <small>Blindaje Internet:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.BindajeInternet, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>
                                <td>
                                    <small>Última Marcación:</small>
                                    @Html.TextBoxFor(m => m.GBCRentabilizacion.UltimaMarcacion, new { @class = "form-control input-sm", @readonly = "true" })
                                </td>

                            </tr>
                            
                        </table>
                    </div>
                    <div class="tab-pane" id="Historial" style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">

                        <div id="historicoGrid"></div>
                    </div>
                    <div class="tab-pane" id="Seguimientos" style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">
                        <div id="seguimientosGrid"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-body">
                    <div class="row">
                        <div class="col-xs-12">

                        </div>
                    </div>
                </div>
                <h2 class="page-header" style="margin-top: 0px; margin-left:1px;">
                    <i class="fa fa-sitemap"></i> Árbol de Tipificación
                </h2>
                <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; padding-right:10px;">
                    <br />
                    <table>
                        <tr>
                            <td style="padding-left:1px; width:200px;">
                                <label>Tipo contacto</label>
                                @Html.DropDownListFor(m => m.GBPRentabilizacion.TipoContacto, new List<SelectListItem> { }, "--SELECCIONE--", new { Id = "tipoContactosSelect", @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GBPRentabilizacion.TipoContacto, "", new { @class = "text-danger" })
                            </td>
                            <td style="padding-left:1px; width:220px;">
                                <label>Gestión</label>
                                @Html.DropDownListFor(m => m.GBPRentabilizacion.Gestion, new List<SelectListItem> { }, "--SELECCIONE--", new { Id = "tiposCierresSelect", @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GBPRentabilizacion.Gestion, "", new { @class = "text-danger" })
                            </td>
                            <td style="padding-left:4px; width:260px;">
                                <label>Cierre</label>
                                @Html.DropDownListFor(m => m.GBPRentabilizacion.Cierre, new List<SelectListItem> { }, "--SELECCIONE--", new { Id = "tiposRazonSelect", @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GBPRentabilizacion.Cierre, "", new { @class = "text-danger" })
                            </td>
                            <td style="padding-left:4px; width:400px;">
                                <label>Razón</label>
                                @Html.DropDownListFor(m => m.GBPRentabilizacion.Causa, new List<SelectListItem> { }, "--SELECCIONE--", new { Id = "tiposCausasSelect", @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GBPRentabilizacion.Causa, "", new { @class = "text-danger" })
                            </td>
                            <td style="padding-left:4px; width:400px;">
                                <label>Razón</label>
                                @Html.DropDownListFor(m => m.GBPRentabilizacion.Motivo, new List<SelectListItem> { }, "--SELECCIONE--", new { Id = "tiposMotivoSelect", @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GBPRentabilizacion.Motivo, "", new { @class = "text-danger" })
                            </td>
                        </tr>
                    </table>
                </div>
                <div id="TituloSeguimiento" style="display:none;">
                    <h2 class="page-header" style="margin-top:40px; margin-left:1px;">
                        <i class="fa fa-calendar-plus-o "></i> Seguimientos
                    </h2>
                </div>
                <div id="CuerpoSeguimineto" style="display:none;">
                    <div style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; padding-right:10px;">
                        <div class="box-body">
                            <table id="Calendario_Seguimiento" style="display:block; margin-bottom: 0px;">
                                <tr>
                                    <td style="padding:1px;">
                                        <small>Seleccione Fecha y Hora del Seguimiento: </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding:1px;">
                                        @Html.TextBoxFor(m => m.GBPRentabilizacion.FechaSeguimiento, new { @class = "form-control input-sm", id = "CC_Fecha", placeholder = "Seleccione Fecha" })
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <h2 class="page-header" style="margin-top: 40px;">
                    <i class="fa fa-comment"></i> Observaciones
                </h2>
                <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; padding-right:10px;">
                    <br />
                    <table>
                        <tr>
                            <td style="padding:1px; width:1200px;">
                                @Html.TextBoxFor(m => m.GBPRentabilizacion.Observaciones, new { @class = "form-control input-sm", placeholder = "", style = "width:100%; height:70px;" })
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>

    </div>

    <div class="box-footer">
        <button type="submit" class="btn btn-block btn-primary" name="cambiarDatos" value="true" style="width:10%;  margin-left:1%;">Guardar</button><br />

    </div>
    <br />
}


@section Scripts{
    <script>
        var urlControlTipoContatoList = '@Url.Action("TiposDeContactoList", "DistribucionBlending")';
        var urlControlTipoGestionList = '@Url.Action("TiposCierresList", "DistribucionBlending")';
        var urlControlTipoCierreList = '@Url.Action("TiposRazonesList", "DistribucionBlending")';
        var urlControlTipoCausaList = '@Url.Action("TiposCausasList", "DistribucionBlending")';
        var urlControlTipoMotivoList = '@Url.Action("TiposMotivoList", "DistribucionBlending")';
        var urlListaGestion = '@Url.Action("HistoricoGestionRentabilizacion", "DistribucionBlending")';
        var urlListaSeguimientos = '@Url.Action("SeguimientosRentabilizacion", "DistribucionBlending")';
    </script>
    <script src="~/Scripts/DistribucionBlending/Rentabilizacion.js?1.0.16"></script>
    <script src="~/Scripts/Gestion_Blending/jquery.datetimepicker.full.js"></script>
    <link href="~/Styles/Elements/jquery.datetimepicker.css" rel="stylesheet" />
    <link href="~/AdminLTE/plugins/icheck/css/all.css" rel="stylesheet" />
    @Scripts.Render("~/AdminLTEplugins/jquery-validate/js")
}

