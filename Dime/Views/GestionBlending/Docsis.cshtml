@model Telmexla.Servicios.DIME.Entity.ViewModelBlending
@{
    ViewBag.Title = "Docsis - Overlap";
    ViewBag.SubTitle = "Gestión Blending";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (Session["Blending Docsis"] != null)
{
using (Html.BeginForm("GuardaDocsis", "GestionBlending", FormMethod.Post, new { id = "", role = "form" }))
{
<div class="callout callout-warning" style="margin-bottom: 0 ; background-color:rgb(255, 255, 255) !important; padding: 0 0 0 0; color: black !important;">
    <div style="background-color:#dcdcdc; padding-top:15px; padding-left:15px; padding-bottom:15px;">
        <div class="row">
            <div class="col-xs-2">
                <small>Número de Cuenta:</small>
                
            </div>
            
        </div>
        <div class="row">
            <div class="col-xs-2">
                <table>
                    <tr>
                        <td>
                            @Html.TextBoxFor(m => m.DatosCliente.Cuenta, new { @class = "form-control input-sm", Id = "cuentaCliente" })
                        </td>
                        <td>
                            @if (Model.DatosCliente.Nombre.Equals("No existen datos"))
                            {
                                <label style="color:red; display:inline-block"> &nbsp;&nbsp; @Model.DatosCliente.Nombre</label>
                            }
                        </td>
                    </tr>
                </table>

                @Html.HiddenFor(m=>m.DocsisOverlapGestionado.Id)
                @Html.HiddenFor(m=>m.DocsisOverlapGestionado.OperacionGestion)
                @Html.HiddenFor(m=>m.DocsisOverlapGestionado.NombreBase)
                @Html.HiddenFor(m=>m.DocsisOverlapGestionado.Aliado)

            </div>
            @*<div class="onoffswitch" style="margin-left: 90%;">
                <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
                <label class="onoffswitch-label" for="myonoffswitch">
                    <span class="onoffswitch-inner"></span>
                    <span class="onoffswitch-switch"></span>
                </label>
            </div>*@
        </div>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-9" style="width:100%; ">

        <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
                <li id="Li1" class="active" style="background-color: #dcdcdc; border-color: #c87f0a"><a href="#Datos_Basicos" style="background-color: transparent;" data-toggle="tab">Datos Básicos</a></li>
                <li id="Li2"><a style="background-color: transparent;" href="#Historico" data-toggle="tab">Mis Históricos</a></li>
                <li id="Li3"><a style="background-color: transparent;" href="#Seguimientos" data-toggle="tab">Mis Seguimientos</a></li>
            </ul>


            <div class="tab-content" style="padding-left:0; padding-top: 0">
                <div class="active tab-pane" id="Datos_Basicos" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px;">
                    <br />
                    <table>
                        <tr>
                            <td width="200" style="padding:1px;">
                                <small>Nombre del Cliente:  </small>

                            <td width="200" style="padding:1px;">
                                <small>Apellido del Cliente:  </small>
                            </td>

                            <td width="200" style="padding:1px;">
                                <small>Dir. Instalación:  </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Dir. Correspondencia:  </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Teléfono 1: </small>
                            </td>
                            <td width="200" style="padding:1px;">
                                <small>Teléfono 2:</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Nombre, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                              @Html.TextBoxFor(m => m.DatosCliente.Apellido, new { @class = "form-control input-sm" })
                            </td>

                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.DirInstalacion, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.DirCorrespondencia, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Telefono1, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Telefono2, new { @class = "form-control input-sm" })
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                <small>Celular 1: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Celular 2:  </small>
                            </td>

                            <td style="padding:1px;">
                                <small>Telefono Telmex: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Ciudad: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Correo Actual: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Estrato: </small>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Celular1, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Celular2, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.TelefonoTelmex, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.NombreComunidad, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Correo, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Estrato, new { @class = "form-control input-sm" })
                            </td>
                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                <small>Tipo Cliente: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Paquete Actual:  </small>
                            </td>

                            <td style="padding:1px;">
                                <small>Movil Postpago: </small>
                            </td>
                            <td style="padding:1px;">
                                <small>Aliado: </small>
                            </td>

                        </tr>
                        <tr>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.TipoCliente, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.Productos, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                @Html.TextBoxFor(m => m.DatosCliente.TelefonoConv, new { @class = "form-control input-sm" })
                            </td>
                            <td style="padding:1px;">
                                <!--Html.TextBoxFor(m => m.Datos-->
                            </td>

                        </tr>
                    </table>
                </div>
                <div class="tab-pane" id="Historico"style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">
                    <div id="historicoGrid"></div>
                </div>
                <div class="tab-pane" id="Seguimientos" style="background-color:#dcdcdc; padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:10px;">
                    <div id="seguimientosGrid"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-12">
        <div class="box box-warning">
            <div class="box-body">
                <div class="row">
                    <div class="col-xs-12">
                        <h2 class="page-header" style="margin-top:25px">
                            <i class="fa fa-sitemap"></i> Árbol de Tipificación
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <br />
                            <div class="form-group">
                                <table>
                                    <tr>
                                        <td style="padding-left:1px; width:200px;">
                                            <label>Tipo contacto</label>
                                            @Html.DropDownListFor(m => m.DocsisOverlapGestionado.TipoDeContacto, new List<SelectListItem> { }, "--Seleccione--", new { @class = "form-control", onchange = "SetearCierresChoices();", id = "tipoContactosSelect" })
                                            @Html.ValidationMessageFor(m => m.DocsisOverlapGestionado.TipoDeContacto, "", new { @class = "text-danger" })
                                        </td>
                                        <td style="padding-left:1px; width:220px;">
                                            <label>Gestión</label>
                                            @Html.DropDownListFor(m => m.DocsisOverlapGestionado.Gestion, new List<SelectListItem> { }, "--Seleccione--", new { @class = "form-control", onchange = "SetearRazonesChoices();", id = "tiposCierresSelect" })
                                            @Html.ValidationMessageFor(m => m.DocsisOverlapGestionado.Gestion, "", new { @class = "text-danger" })
                                        </td>
                                        <td style="padding-left:4px; width:260px;">
                                            <label>Cierre</label>
                                            @Html.DropDownListFor(m => m.DocsisOverlapGestionado.Cierre, new List<SelectListItem> { }, "--Seleccione--", new { @class = "form-control", onchange = "SetearCausaChoices();", id = "tiposRazonSelect" })
                                            @Html.ValidationMessageFor(m => m.DocsisOverlapGestionado.Cierre, "", new { @class = "text-danger" })
                                        </td>
                                        <td style="padding-left:4px; width:260px;">
                                            <label>Razón</label>
                                            @Html.DropDownListFor(m => m.DocsisOverlapGestionado.Razon, new List<SelectListItem> { }, "--Seleccione--", new { @class = "form-control", id = "tiposCausasSelect" })
                                            @Html.ValidationMessageFor(m => m.DocsisOverlapGestionado.Razon, "", new { @class = "text-danger" })
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 class="page-header" style="margin-top: 40px;">
                            <i class="fa fa-comment"></i> Observaciones
                        </h2>
                        <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">
                            <br />
                            <table id="Calendario_Seguimiento" style=" margin-bottom: 20px;">
                                <tr>
                                    <td style="padding:1px;">
                                        <small>Seleccione Fecha y Hora del Seguimiento: </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding:1px;">
                                        @{

                                            Model.DocsisOverlapGestionado.FechaSeguimiento = null;
                                        }
                                        @Html.TextBoxFor(m => m.DocsisOverlapGestionado.FechaSeguimiento, new { @class = "form-control input-sm", id = "D_Fecha", placeholder = "Seleccione Fecha" })  
                                    </td>
                                </tr>
                            </table>

                            <table>
                                <tr>
                                    <td style="padding:1px; width:1200px;">
                                        <strong>NOTA ANTERIOR: </strong>  @Model.DocsisOverlapGestionado.Observaciones
                                        @{

                                            Model.DocsisOverlapGestionado.Observaciones = " ";
                                        }
                                       @Html.TextBoxFor(m => m.DocsisOverlapGestionado.Observaciones, new { @class = "form-control input-sm", id = "D_Fecha", placeholder = "", style = "width:100%; height:70px;" })   
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div class="box-footer">
                <button type="submit" class="btn btn-block btn-primary" name="cambiarDatos" value="true" style="width:10%;  margin-left:1%;">Guardar</button>
                @if (Model.DatosCliente.Nombre.Equals("No existen datos"))
                {
                    <p class="text-danger">No se puede guardar registros por que no existen cuentas para gestionar</p>
                }
            </div>
            <br />
        </div>
    </div>
    @*<div id="Historico_Seguimientos" class="col-md-12" style="display:block">
            <div class="box box-warning">
                <div  class="box-body" >
                    <div class="row">
                        <div class="col-xs-12">
                            <h2 class="page-header" style="margin-top:25px">
                                <i class="fa fa-sitemap"></i> Histórico de Seguimientos
                            </h2>
                            <div id="3_ofre" style="background-color:#dcdcdc; padding-left:10px; padding-bottom:10px; margin-top:-10px; margin-left: -10px; padding-right:10px;">

                                <div class="box-body">
                                    <table id="example2" class="table table-hover " style="background-color:white; border: 1px solid black; margin-left: -10px;">
                                        <thead style="background-color: black;color: white;">
                                            <tr>
                                                <th style="text-align: center; border-left:1px white;">Fecha Gestión</th>
                                                <th style="text-align: center;">Usuario RR</th>
                                                <th style="text-align: center;">Nombre Asesor</th>
                                                <th style="text-align: center;">Aliado</th>
                                                <th style="text-align: center;">Tipo Contacto</th>
                                                <th style="text-align: center;">Cierre</th>
                                                <th style="text-align: center;">Razón</th>
                                                <th style="text-align: center;">Observaciones</th>
                                                <th style="text-align: center;">Fecha Seguimiento</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Trident</td>
                                                <td>
                                                    Internet Explorer 4.0
                                                </td>
                                                <td>Win 95+</td>
                                                <td> 4</td>
                                                <td>X</td>
                                                <td>X</td>
                                                <td>X</td>
                                                <td>X</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                </div>
            </div>
        </div>*@
</div>
}

@section Scripts{
<script>
        var urlControlTipoContatoList = '@Url.Action("TiposDeContactoList","GestionBlending")';
        var urlControlTiposCierresList = '@Url.Action("TiposCierresList", "GestionBlending")';
        var urlControlTiposRazonesList = '@Url.Action("TiposRazonesList", "GestionBlending")';
    var urlControlTiposCausasList = '@Url.Action("TiposCausasList", "GestionBlending")';
    var  dataHistoricoGestion = @Html.Raw(Json.Encode(Model.HistoricoDocsisOverlap));
</script>
    <script src="~/Scripts/Gestion_Blending/Docsis.js?1.0.2"></script>
    <script src="~/Scripts/Gestion_Blending/jquery.datetimepicker.full.js"></script>
    <link href="~/Styles/Elements/jquery.datetimepicker.css" rel="stylesheet" />
    <link href="~/Styles/Elements/Dime2.css?1.0.1" rel="stylesheet" />
    @Scripts.Render("/Scripts/Tables/Data/menu")
    @Styles.Render("/AdminLTE/plugins/datatables/css")
@Scripts.Render("~/AdminLTEplugins/jquery-validate/js")

}
}
else
{
<div class="row">

    <div class="box box-primary">

        <div class="box-body">

            <div class="row">
                <div class="col-md-12">
                    <div class="error-page">
                        <h2 class="headline text-red" style="margin-top:-18px;">502</h2>
                        <div class="error-content">
                            <h3><i class="fa fa-warning text-red"></i> Oops! Acceso Denegado.</h3>
                            <p style="text-align:justify;">
                                La información que se relaciona en esta vista no es posible visualizarse ya que su perfil no posee el acceso necesario.
                                Por favor solicite al administrador del sistema el acceso correspondiente.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}
